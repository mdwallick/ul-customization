<!DOCTYPE html>
<html lang="{{locale}}">
  <head>
    {%- auth0:head -%}

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      #custom-prompt-logo {
        background-image: var(--icon-auth0-badge);
      }

      /* Base (Light Mode) Theme */
      :root {
        --icon-auth0-badge: url("data:image/svg+xml;charset=utf-8,%3Csvg width='20' height='24' viewBox='0 0 53 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3.372 27.782c10.475-1.728 18.686-10.4 20.407-20.892l.577-5.043c.143-.802-.4-1.918-1.412-1.838C15.03.628 7.56 3.243 3.406 4.943A5.488 5.488 0 0 0 0 10.027v16.451c0 .973.874 1.717 1.834 1.563l1.538-.252v-.006zM28.831 6.89c1.726 10.492 9.938 19.164 20.407 20.893l1.537.252a1.58 1.58 0 0 0 1.835-1.563v-16.45a5.488 5.488 0 0 0-3.406-5.084C45.044 3.232 37.58.622 29.666.004c-1.018-.08-1.538 1.048-1.418 1.837l.577 5.043.006.006zm20.399 25.5c-14.315 2.829-20.96 12.36-20.96 30.4 0 .905.897 1.535 1.651 1.031 6.584-4.447 21.07-16.056 22.562-30.577.057-1.826-2.223-.968-3.252-.853zm-45.853 0c14.315 2.828 20.961 12.359 20.961 30.4 0 .905-.897 1.535-1.651 1.031C16.103 59.374 1.617 47.765.125 33.244c-.057-1.826 2.223-.968 3.252-.853z' fill='%23333'/%3E%3C/svg%3E");
        --primary-color: #0a84ff;
        --primary-color-no-override: #0059d6;
        --link-color-values: 0, 123, 173;
        --link-color: rgb(var(--link-color-values));
        --page-background-color: #fff;
        --info-color: #0a66e1;
        --success-color: #0a8852;
        --error-color-values: 208, 14, 23;
        --error-color: #d00e17;
        --error-text-color: #fff;
        --warning-color: #ffdb5f;
        --button-font-color: #fff;
        --widget-background-color: #fff;
        --presentational-content-color: #6f7780;
        --brand-primary-color: #3f59e4;
        --gray-lightest: #f1f2f3;
        --gray-light: #dee2e6;
        --gray-mid: #c2c8d0;
        --gray-dark: #6f7780;
        --gray-darkest: #2d333a;
        --gray-mid-dark: #686868;
        --gray-social-border: #8e8e8e;
        --computed-readonly-color: color-mix(
          in hsl,
          var(--input-background-color),
          var(--input-text-color) 8%
        );
        --font-default-color: var(--gray-darkest);
        --font-light-color: var(--gray-dark);
        --title-font-color: var(--gray-darkest);
        --icon-default-color: var(--gray-dark);
        --input-font-color: var(--font-default-color);
        --input-background-color: var(--widget-background-color);
        --input-text-color: var(--font-default-color);
        --social-button-border-color: var(--gray-social-border);
        --secondary-button-border-color: var(--gray-mid);
        --secondary-button-text-color: var(--font-default-color);
        --radio-button-border-color: var(--gray-mid);
        --ulp-captcha-widget-theme: light;
        --border-default-color: var(--gray-mid);
        --out-input-border-color: var(--gray-mid-dark);
        --input-border-color: var(--out-input-border-color);
        --base-hover-color-values: 0, 0, 0;
        --base-hover-color: rgb(var(--base-hover-color-values));
        --transparency-hover-color: rgba(
          var(--base-hover-color-values),
          var(--hover-transparency-value)
        );
        --button-hover-shadow: var(--overlay-box-shadow-size)
          var(--transparency-hover-color);
        --base-focus-color: var(--brand-primary-color);
        --transparency-focus-color: var(--widget-background-color);
        --button-dark-focus-shadow: var(--overlay-box-shadow-size)
          var(--transparency-focus-color);
        --transparency-focus-error-color: rgba(
          var(--error-color-values),
          var(--focus-transparency-value)
        );
        --shadow-component-outer: 0 12px 40px rgba(0, 0, 0, 0.12);

        /* CSS for light/dark toggle */
        --toggle-font-size: 0.9rem;
        --toggle-text-color: #333;
        --toggle-bg: transparent;
        --toggle-padding: 0.5rem 1rem;
        --toggle-border-radius: 0.5rem;
        --toggle-hover-bg: rgba(0, 0, 0, 0.05);
      }

      .dark {
        --icon-auth0-badge: url("data:image/svg+xml;charset=utf-8,%3Csvg width='20' height='24' viewBox='0 0 53 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3.372 27.782c10.475-1.728 18.686-10.4 20.407-20.892l.577-5.043c.143-.802-.4-1.918-1.412-1.838C15.03.628 7.56 3.243 3.406 4.943A5.488 5.488 0 0 0 0 10.027v16.451c0 .973.874 1.717 1.834 1.563l1.538-.252v-.006zM28.831 6.89c1.726 10.492 9.938 19.164 20.407 20.893l1.537.252a1.58 1.58 0 0 0 1.835-1.563v-16.45a5.488 5.488 0 0 0-3.406-5.084C45.044 3.232 37.58.622 29.666.004c-1.018-.08-1.538 1.048-1.418 1.837l.577 5.043.006.006zm20.399 25.5c-14.315 2.829-20.96 12.36-20.96 30.4 0 .905.897 1.535 1.651 1.031 6.584-4.447 21.07-16.056 22.562-30.577.057-1.826-2.223-.968-3.252-.853zm-45.853 0c14.315 2.828 20.961 12.359 20.961 30.4 0 .905-.897 1.535-1.651 1.031C16.103 59.374 1.617 47.765.125 33.244c-.057-1.826 2.223-.968 3.252-.853z' fill='%23FFF'/%3E%3C/svg%3E");
        --primary-color: #0a84ff;
        --primary-color-no-override: #0a84ff;
        --link-color-values: 0, 123, 173;
        --link-color: rgb(var(--link-color-values));
        --page-background-color: #0f172a;
        --info-color: #0a66e1;
        --success-color: #0a8852;
        --error-color-values: 208, 14, 23;
        --error-color: #d00e17;
        --error-text-color: #f1f1f1;
        --warning-color: #ffdb5f;
        --button-font-color: #f1f1f1;
        --widget-background-color: #030617;
        --presentational-content-color: #6f7780;
        --brand-primary-color: #3fc2e4;
        --gray-lightest: #f1f1f1;
        --gray-light: #f1f1f1;
        --gray-mid: #f1f1f1;
        --gray-dark: #f1f1f1;
        --gray-darkest: #ffffff;
        --gray-mid-dark: #f1f1f1;
        --gray-social-border: #f1f1f1;
        --computed-readonly-color: color-mix(
          in hsl,
          var(--input-background-color),
          var(--input-text-color) 8%
        );
        --font-default-color: var(--gray-darkest);
        --font-light-color: var(--gray-dark);
        --title-font-color: var(--gray-darkest);
        --icon-default-color: var(--gray-dark);
        --input-font-color: var(--font-default-color);
        --input-background-color: var(--widget-background-color);
        --input-text-color: var(--font-default-color);
        --social-button-border-color: var(--gray-social-border);
        --secondary-button-border-color: var(--gray-mid);
        --secondary-button-text-color: var(--font-default-color);
        --radio-button-border-color: var(--gray-mid);
        --ulp-captcha-widget-theme: dark;
        --border-default-color: var(--gray-mid);
        --out-input-border-color: var(--gray-mid-dark);
        --input-border-color: var(--out-input-border-color);
        --base-hover-color-values: 0, 0, 0;
        --base-hover-color: rgb(var(--base-hover-color-values));
        --transparency-hover-color: rgba(
          var(--base-hover-color-values),
          var(--hover-transparency-value)
        );
        --button-hover-shadow: var(--overlay-box-shadow-size)
          var(--transparency-hover-color);
        --base-focus-color: var(--brand-primary-color);
        --transparency-focus-color: var(--widget-background-color);
        --button-dark-focus-shadow: var(--overlay-box-shadow-size)
          var(--transparency-focus-color);
        --transparency-focus-error-color: rgba(
          var(--error-color-values),
          var(--focus-transparency-value)
        );
        --shadow-component-outer: 0 12px 40px rgba(0, 0, 0, 0.12);

        /* CSS for light/dark toggle */
        --toggle-text-color: #eee;
        --toggle-hover-bg: rgba(255, 255, 255, 0.1);
      }

      html {
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      #toggle-container {
        margin: 1rem auto 0 auto;
      }

      .theme-toggle {
        font-size: var(--toggle-font-size);
        color: var(--toggle-text-color);
        background: var(--toggle-bg);
        padding: var(--toggle-padding);
        border: none;
        cursor: pointer;
        border-radius: var(--toggle-border-radius);
        transition: background 0.3s ease;
      }

      .theme-toggle:hover {
        background: var(--toggle-hover-bg);
      }

      /*
      Dark Mode Overrides

      These two class overrides are required for full dark mode
      support.
      
      The first is for the body background color.

      The second one is for Auth0 Forms, so you don't get a white 
      input field with white input text.
      */
      html.dark body {
        --page-background-color: #0f172a;
      }

      div.af-field-content {
        --input-font-color: #fff;
        --input-background-color: #030617;
      }
    </style>
    <title>Welcome to {{ application.name }}</title>
  </head>

  <body class="_widget-auto-layout _use-custom-prompt-logo">
    {%- auth0:widget -%}

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const root = document.documentElement
        const widgetContainer = document.querySelector("main._widget")
        if (!widgetContainer) return

        const firstSection = widgetContainer.querySelector("section")
        if (!firstSection) return

        const toggleContainer = document.createElement("div")
        toggleContainer.id = "toggle-container"

        const toggleButton = document.createElement("button")
        toggleButton.id = "darkModeToggle"
        toggleButton.className = "theme-toggle"

        const modeLabel = document.createElement("span")
        modeLabel.className = "mode-label"
        modeLabel.textContent = "Light"

        const otherLabel = document.createElement("span")
        otherLabel.className = "other-mode-label"
        otherLabel.textContent = "Dark"

        const icon = document.createElement("i")
        icon.className = "fas fa-3x fa-moon"

        toggleButton.append(icon)

        toggleContainer.appendChild(toggleButton)
        firstSection.appendChild(toggleContainer)

        const userPref = localStorage.getItem("theme")
        const systemPrefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches

        if (userPref === "dark" || (!userPref && systemPrefersDark)) {
          root.classList.add("dark")
        }

        function updateToggleUI() {
          const isDark = root.classList.contains("dark")
          icon.classList.toggle("fa-moon", !isDark)
          icon.classList.toggle("fa-sun", isDark)
          localStorage.setItem("theme", isDark ? "dark" : "light")
        }

        toggleButton.addEventListener("click", () => {
          root.classList.toggle("dark")
          updateToggleUI()
        })

        updateToggleUI()
      })
    </script>
  </body>
</html>
